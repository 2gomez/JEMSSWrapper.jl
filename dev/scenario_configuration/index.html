<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scenario Configuration · JEMSSWrapper.jl</title><meta name="title" content="Scenario Configuration · JEMSSWrapper.jl"/><meta property="og:title" content="Scenario Configuration · JEMSSWrapper.jl"/><meta property="twitter:title" content="Scenario Configuration · JEMSSWrapper.jl"/><meta name="description" content="Documentation for JEMSSWrapper.jl."/><meta property="og:description" content="Documentation for JEMSSWrapper.jl."/><meta property="twitter:description" content="Documentation for JEMSSWrapper.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">JEMSSWrapper.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">User Guide</span><ul><li class="is-active"><a class="tocitem" href>Scenario Configuration</a><ul class="internal"><li><a class="tocitem" href="#Table-of-Contents"><span>Table of Contents</span></a></li><li><a class="tocitem" href="#Directory-Structure"><span>Directory Structure</span></a></li><li><a class="tocitem" href="#Configuration-Files"><span>Configuration Files</span></a></li><li><a class="tocitem" href="#Loading-Scenarios"><span>Loading Scenarios</span></a></li><li><a class="tocitem" href="#Modifying-Scenarios"><span>Modifying Scenarios</span></a></li><li><a class="tocitem" href="#Creating-New-Scenarios"><span>Creating New Scenarios</span></a></li><li><a class="tocitem" href="#See-Also"><span>See Also</span></a></li></ul></li><li><a class="tocitem" href="../strategies/">Strategy Development Guide</a></li><li><a class="tocitem" href="../simulation_state/">Simulation State</a></li><li><a class="tocitem" href="../neural_strategy/">Neural Network Strategy</a></li></ul></li><li><a class="tocitem" href="../api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href>Scenario Configuration</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scenario Configuration</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/2gomez/JEMSSWrapper.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/2gomez/JEMSSWrapper.jl/blob/main/docs/src/scenario_configuration.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Scenarios-and-Configuration"><a class="docs-heading-anchor" href="#Scenarios-and-Configuration">Scenarios &amp; Configuration</a><a id="Scenarios-and-Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Scenarios-and-Configuration" title="Permalink"></a></h1><p>Learn how to configure and work with simulation scenarios in JEMSSWrapper.</p><hr/><h2 id="Table-of-Contents"><a class="docs-heading-anchor" href="#Table-of-Contents">Table of Contents</a><a id="Table-of-Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Table-of-Contents" title="Permalink"></a></h2><ul><li><a href="#directory-structure">Directory Structure</a></li><li><a href="#configuration-files">Configuration Files</a></li><li><a href="#loading-scenarios">Loading Scenarios</a></li><li><a href="#modifying-scenarios">Modifying Scenarios</a></li><li><a href="#creating-new-scenarios">Creating New Scenarios</a></li></ul><hr/><h2 id="Directory-Structure"><a class="docs-heading-anchor" href="#Directory-Structure">Directory Structure</a><a id="Directory-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Directory-Structure" title="Permalink"></a></h2><p>Scenarios are organized in a standard directory structure:</p><pre><code class="nohighlight hljs">scenarios/
└── auckland/
    ├── configs/
    │   ├── base.toml
    │   ├── peak_hours.toml
    │   └── reduced_fleet.toml
    └── models/              # Link or copy of JEMSS model files
        ├── hospitals/
        ├── stations/
        ├── travel/
        ├── ambulances/
        ├── calls/
        └── ...</code></pre><h3 id="Setting-the-Scenarios-Directory"><a class="docs-heading-anchor" href="#Setting-the-Scenarios-Directory">Setting the Scenarios Directory</a><a id="Setting-the-Scenarios-Directory-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-the-Scenarios-Directory" title="Permalink"></a></h3><p>By default, JEMSSWrapper looks for scenarios in <code>examples/scenarios</code>. Customize this location:</p><pre><code class="language-julia hljs">scenario = load_scenario_from_config(&quot;auckland&quot;, &quot;base.toml&quot;;
                                     scenarios_dir=&quot;/path/to/scenarios&quot;)</code></pre><hr/><h2 id="Configuration-Files"><a class="docs-heading-anchor" href="#Configuration-Files">Configuration Files</a><a id="Configuration-Files-1"></a><a class="docs-heading-anchor-permalink" href="#Configuration-Files" title="Permalink"></a></h2><p>Configuration files use TOML format and define all data files needed for a scenario.</p><h3 id="Complete-Example"><a class="docs-heading-anchor" href="#Complete-Example">Complete Example</a><a id="Complete-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Complete-Example" title="Permalink"></a></h3><pre><code class="language-toml hljs">[metadata]
name = &quot;auckland_base&quot;
scenario_name = &quot;auckland&quot;
description = &quot;Auckland scenario with standard configuration&quot;
models_dir = &quot;models&quot;  # relative to scenarios/auckland/

[files]
# Infrastructure (required)
hospitals = &quot;hospitals/hospitals_1.csv&quot;
stations = &quot;stations/stations_1.csv&quot;
nodes = &quot;travel/roads/nodes.csv&quot;
arcs = &quot;travel/roads/arcs.csv&quot;
map = &quot;maps/map_1.csv&quot;
travel = &quot;travel/travel/travel_1.csv&quot;
priorities = &quot;misc/call priorities/priorities_1.csv&quot;
stats = &quot;calls/single/train/stats_control.csv&quot;

# Travel network cache (auto-generated if missing)
r_net_travels = &quot;travel/roads/r_net_travels.jls&quot;

# Optional demand modeling
# demand = &quot;demand/demand_1.csv&quot;
# demand_coverage = &quot;demand/coverage/demand_coverage_1.csv&quot;

[defaults]
# Default data files (can be overridden when loading)
ambulances = &quot;ambulances/ambulances_1.csv&quot;
calls = &quot;calls/single/train/gen_config.xml&quot;</code></pre><h3 id="Configuration-Sections"><a class="docs-heading-anchor" href="#Configuration-Sections">Configuration Sections</a><a id="Configuration-Sections-1"></a><a class="docs-heading-anchor-permalink" href="#Configuration-Sections" title="Permalink"></a></h3><h4 id="[metadata]"><a class="docs-heading-anchor" href="#[metadata]"><code>[metadata]</code></a><a id="[metadata]-1"></a><a class="docs-heading-anchor-permalink" href="#[metadata]" title="Permalink"></a></h4><p>Basic scenario information:</p><ul><li><code>name</code>: Unique identifier for this configuration</li><li><code>scenario_name</code>: Must match the directory name</li><li><code>description</code>: Human-readable description</li><li><code>models_dir</code>: Directory containing model files (relative to scenario directory)</li></ul><h4 id="[files]"><a class="docs-heading-anchor" href="#[files]"><code>[files]</code></a><a id="[files]-1"></a><a class="docs-heading-anchor-permalink" href="#[files]" title="Permalink"></a></h4><p>All paths are relative to <code>scenarios/{scenario_name}/{models_dir}/</code>.</p><p><strong>Required files</strong>:</p><ul><li><code>hospitals</code>, <code>stations</code>: Infrastructure locations and capacities</li><li><code>nodes</code>, <code>arcs</code>: Road network definition</li><li><code>map</code>: Geographic map data</li><li><code>travel</code>: Travel time configuration</li><li><code>priorities</code>: Call priority definitions</li><li><code>stats</code>: Statistical configuration</li></ul><p><strong>Auto-generated</strong>:</p><ul><li><code>r_net_travels</code>: Serialized travel network (computed from nodes/arcs on first run)</li></ul><p><strong>Optional</strong>:</p><ul><li><code>demand</code>, <code>demand_coverage</code>: Demand modeling (can be commented out or omitted)</li></ul><h4 id="[defaults]"><a class="docs-heading-anchor" href="#[defaults]"><code>[defaults]</code></a><a id="[defaults]-1"></a><a class="docs-heading-anchor-permalink" href="#[defaults]" title="Permalink"></a></h4><p>Default ambulances and calls files. Can be overridden when loading the scenario.</p><hr/><h2 id="Loading-Scenarios"><a class="docs-heading-anchor" href="#Loading-Scenarios">Loading Scenarios</a><a id="Loading-Scenarios-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-Scenarios" title="Permalink"></a></h2><h3 id="Basic-Loading"><a class="docs-heading-anchor" href="#Basic-Loading">Basic Loading</a><a id="Basic-Loading-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Loading" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Load with default ambulances and calls from config
scenario = load_scenario_from_config(&quot;auckland&quot;, &quot;base.toml&quot;)</code></pre><p>This loads:</p><ul><li>Config: <code>scenarios/auckland/configs/base.toml</code></li><li>Models: <code>scenarios/auckland/models/...</code></li><li>Default ambulances and calls from <code>[defaults]</code> section</li></ul><h3 id="Custom-Data-Files"><a class="docs-heading-anchor" href="#Custom-Data-Files">Custom Data Files</a><a id="Custom-Data-Files-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-Data-Files" title="Permalink"></a></h3><p>Override default ambulances or calls:</p><pre><code class="language-julia hljs"># Custom calls only
scenario = load_scenario_from_config(&quot;auckland&quot;, &quot;base.toml&quot;;
                                     calls_path=&quot;data/peak_hours_calls.csv&quot;)

# Custom ambulances and calls
scenario = load_scenario_from_config(&quot;auckland&quot;, &quot;base.toml&quot;;
                                     ambulances_path=&quot;data/fleet_15.csv&quot;,
                                     calls_path=&quot;data/test_calls.csv&quot;)</code></pre><h3 id="Multiple-Configurations"><a class="docs-heading-anchor" href="#Multiple-Configurations">Multiple Configurations</a><a id="Multiple-Configurations-1"></a><a class="docs-heading-anchor-permalink" href="#Multiple-Configurations" title="Permalink"></a></h3><p>Load different configurations of the same scenario:</p><pre><code class="language-julia hljs"># Standard configuration
base = load_scenario_from_config(&quot;auckland&quot;, &quot;base.toml&quot;)

# Peak hours scenario
peak = load_scenario_from_config(&quot;auckland&quot;, &quot;peak_hours.toml&quot;)

# Budget constraints
budget = load_scenario_from_config(&quot;auckland&quot;, &quot;reduced_fleet.toml&quot;)</code></pre><hr/><h2 id="Modifying-Scenarios"><a class="docs-heading-anchor" href="#Modifying-Scenarios">Modifying Scenarios</a><a id="Modifying-Scenarios-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-Scenarios" title="Permalink"></a></h2><p>Once loaded, scenarios can be modified without reloading infrastructure.</p><h3 id="Update-Calls"><a class="docs-heading-anchor" href="#Update-Calls">Update Calls</a><a id="Update-Calls-1"></a><a class="docs-heading-anchor-permalink" href="#Update-Calls" title="Permalink"></a></h3><p>Test different demand patterns on the same infrastructure:</p><pre><code class="language-julia hljs"># Load base scenario
base_scenario = load_scenario_from_config(&quot;auckland&quot;, &quot;base.toml&quot;)

# Update with different call patterns
peak_scenario = update_scenario_calls(base_scenario, &quot;data/peak_calls.csv&quot;)
night_scenario = update_scenario_calls(base_scenario, &quot;data/night_calls.csv&quot;)</code></pre><h3 id="Update-Ambulances"><a class="docs-heading-anchor" href="#Update-Ambulances">Update Ambulances</a><a id="Update-Ambulances-1"></a><a class="docs-heading-anchor-permalink" href="#Update-Ambulances" title="Permalink"></a></h3><p>Test different fleet configurations:</p><pre><code class="language-julia hljs"># Start with base scenario
base_scenario = load_scenario_from_config(&quot;auckland&quot;, &quot;base.toml&quot;)

# Try different fleet sizes
fleet_10_scenario = update_scenario_ambulances(base_scenario, &quot;data/10_ambulances.csv&quot;)
fleet_15_scenario = update_scenario_ambulances(base_scenario, &quot;data/15_ambulances.csv&quot;)</code></pre><hr/><h2 id="Creating-New-Scenarios"><a class="docs-heading-anchor" href="#Creating-New-Scenarios">Creating New Scenarios</a><a id="Creating-New-Scenarios-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-New-Scenarios" title="Permalink"></a></h2><h3 id="Step-1:-Prepare-Model-Files"><a class="docs-heading-anchor" href="#Step-1:-Prepare-Model-Files">Step 1: Prepare Model Files</a><a id="Step-1:-Prepare-Model-Files-1"></a><a class="docs-heading-anchor-permalink" href="#Step-1:-Prepare-Model-Files" title="Permalink"></a></h3><p>Option A - Use JEMSS city models from <code>JEMSS_DATA_DIR</code> path. Available cities: auckland, edmonton, manhattan, utrecht</p><p>Option B - Prepare your own model files following JEMSS format.</p><h3 id="Step-2:-Create-Directory-Structure"><a class="docs-heading-anchor" href="#Step-2:-Create-Directory-Structure">Step 2: Create Directory Structure</a><a id="Step-2:-Create-Directory-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Step-2:-Create-Directory-Structure" title="Permalink"></a></h3><pre><code class="language-bash hljs"># Create scenario directories
mkdir -p scenarios/my_city/configs
mkdir -p scenarios/my_city/models

# Or use existing structure
scenarios/
└── my_city/
    ├── configs/
    └── models/</code></pre><h3 id="Step-3:-Link-or-Copy-Model-Files"><a class="docs-heading-anchor" href="#Step-3:-Link-or-Copy-Model-Files">Step 3: Link or Copy Model Files</a><a id="Step-3:-Link-or-Copy-Model-Files-1"></a><a class="docs-heading-anchor-permalink" href="#Step-3:-Link-or-Copy-Model-Files" title="Permalink"></a></h3><pre><code class="language-bash hljs"># Option 1: Symbolic link (recommended for JEMSS cities)
ln -s ~/.julia/packages/JEMSS/.../data/cities/auckland/models/1 \
      scenarios/my_city/models

# Option 2: Copy files (if you need to modify them)
cp -r /path/to/model/files/* scenarios/my_city/models/</code></pre><h3 id="Step-4:-Create-Configuration-File"><a class="docs-heading-anchor" href="#Step-4:-Create-Configuration-File">Step 4: Create Configuration File</a><a id="Step-4:-Create-Configuration-File-1"></a><a class="docs-heading-anchor-permalink" href="#Step-4:-Create-Configuration-File" title="Permalink"></a></h3><p>Create <code>scenarios/my_city/configs/base.toml</code> following the format shown above. Ensure:</p><ul><li><code>scenario_name</code> matches directory name (<code>my_city</code>)</li><li>All file paths exist in <code>models/</code> directory</li><li>Required files are specified</li><li>Optional files (<code>demand</code>, <code>demand_coverage</code>) are commented out if not available</li></ul><h3 id="Step-5:-Test-Loading"><a class="docs-heading-anchor" href="#Step-5:-Test-Loading">Step 5: Test Loading</a><a id="Step-5:-Test-Loading-1"></a><a class="docs-heading-anchor-permalink" href="#Step-5:-Test-Loading" title="Permalink"></a></h3><pre><code class="language-julia hljs">scenario = load_scenario_from_config(&quot;my_city&quot;, &quot;base.toml&quot;)
sim = simulate_scenario(scenario)

# Verify it loaded correctly
println(&quot;Stations: &quot;, sim.numStations)
println(&quot;Ambulances: &quot;, sim.numAmbs)
println(&quot;Hospitals: &quot;, sim.numHospitals)</code></pre><h2 id="See-Also"><a class="docs-heading-anchor" href="#See-Also">See Also</a><a id="See-Also-1"></a><a class="docs-heading-anchor-permalink" href="#See-Also" title="Permalink"></a></h2><ul><li><strong><a href="../api/#API-Reference">API Reference</a></strong> - Complete function documentation</li><li><strong><a href="https://github.com/uoa-ems-research/JEMSS.jl/tree/master/data/cities">JEMSS.jl Data</a></strong> - Example city models</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../strategies/">Strategy Development Guide »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Tuesday 11 November 2025 21:42">Tuesday 11 November 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
