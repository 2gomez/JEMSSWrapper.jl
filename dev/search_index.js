var documenterSearchIndex = {"docs":
[{"location":"api/#API-Reference","page":"API Reference","title":"API Reference","text":"","category":"section"},{"location":"api/","page":"API Reference","title":"API Reference","text":"This page documents all public functions, types, and interfaces in JEMSSWrapper.jl.","category":"page"},{"location":"api/#Table-of-Contents","page":"API Reference","title":"Table of Contents","text":"","category":"section"},{"location":"api/","page":"API Reference","title":"API Reference","text":"Scenario Management - Load and configure scenarios\nSimulation Execution - Run simulations with custom strategies\nMetrics System - Extract and analyze simulation metrics\nStrategy Interface - Implement custom move-up strategies\nEncoding Interface - State encoding for ML applications\nLogging System - Track move-up decisions\nState Access Utilities - Query simulation state\nBuilt-in Strategies - Ready-to-use implementations\nCore Data Types - Core structures\nJEMSS Access - Direct access to JEMSS framework","category":"page"},{"location":"api/","page":"API Reference","title":"API Reference","text":"","category":"page"},{"location":"api/#Scenario-Management","page":"API Reference","title":"Scenario Management","text":"","category":"section"},{"location":"api/","page":"API Reference","title":"API Reference","text":"Load simulation scenarios from configuration files and modify them programmatically.","category":"page"},{"location":"api/#JEMSSWrapper.load_scenario_from_config","page":"API Reference","title":"JEMSSWrapper.load_scenario_from_config","text":"load_scenario_from_config(scenario_name::String, \n                          config_name::String;\n                          ambulances_path::String = \"\",\n                          calls_path::String = \"\",\n                          scenarios_dir::String = SCENARIOS_DIR) -> ScenarioData\n\nLoad a simulation scenario from TOML configuration files.\n\nCreates a complete scenario with infrastructure (stations, hospitals, road network), ambulances, and calls. The scenario can be modified later with update_scenario_calls  or update_scenario_ambulances.\n\nArguments\n\nscenario_name::String: Name of the scenario (e.g., \"auckland\")\nconfig_name::String: Name of the configuration file (e.g., \"base.toml\")\nambulances_path::String: Optional custom path to ambulances CSV\ncalls_path::String: Optional custom path to calls CSV\nscenarios_dir::String: Base directory for scenarios (defaults to SCENARIOS_DIR)\n\nReturns\n\nScenarioData: Immutable scenario configuration containing simulation, calls, and metadata\n\nExamples\n\n# Load default scenario\nscenario = load_scenario_from_config(\"auckland\", \"base.toml\")\n\n# Load with custom calls\nscenario = load_scenario_from_config(\"auckland\", \"base.toml\"; \n                                     calls_path=\"custom_calls.csv\")\n\n\n\n\n\n","category":"function"},{"location":"api/#Modifying-Scenarios","page":"API Reference","title":"Modifying Scenarios","text":"","category":"section"},{"location":"api/#JEMSSWrapper.update_scenario_calls","page":"API Reference","title":"JEMSSWrapper.update_scenario_calls","text":"update_scenario_calls(scenario::ScenarioData, calls_path::String) -> ScenarioData\n\nUpdate calls in an existing scenario without reloading infrastructure.\n\nCreates a new ScenarioData with modified calls while preserving stations, hospitals, and road network. Useful for testing different demand patterns on the same infrastructure.\n\nArguments\n\nscenario::ScenarioData: Original scenario\ncalls_path::String: Path to new calls CSV file\n\nReturns\n\nScenarioData: New scenario with updated calls\n\nExamples\n\nbase_scenario = load_scenario_from_config(\"auckland\", \"base.toml\")\npeak_scenario = update_scenario_calls(base_scenario, \"peak_hours_calls.csv\")\n\n\n\n\n\nupdate_scenario_calls(scenario::ScenarioData, calls::Vector{JEMSS.Call}) -> ScenarioData\n\nUpdate calls in an existing scenario using a vector of Call objects.\n\nCreates a new ScenarioData with modified calls while preserving stations, hospitals, and road network. Useful for programmatically generating or modifying demand patterns.\n\nArguments\n\nscenario::ScenarioData: Original scenario\ncalls::Vector{JEMSS.Call}: Vector of call objects\n\nReturns\n\nScenarioData: New scenario with updated calls\n\n\n\n\n\n","category":"function"},{"location":"api/#JEMSSWrapper.update_scenario_ambulances","page":"API Reference","title":"JEMSSWrapper.update_scenario_ambulances","text":"update_scenario_ambulances(scenario::ScenarioData, ambulances_path::String) -> ScenarioData\n\nUpdate ambulances in an existing scenario without reloading infrastructure.\n\nCreates a new ScenarioData with modified ambulance fleet while preserving infrastructure and calls. Useful for testing different fleet configurations.\n\nArguments\n\nscenario::ScenarioData: Original scenario\nambulances_path::String: Path to new ambulances CSV file\n\nReturns\n\nScenarioData: New scenario with updated ambulances\n\nExamples\n\nbase_scenario = load_scenario_from_config(\"auckland\", \"base.toml\")\nexpanded_fleet = update_scenario_ambulances(base_scenario, \"20_ambulances.csv\")\n\n\n\n\n\nupdate_scenario_ambulances(scenario::ScenarioData, ambulances::Vector{JEMSS.Ambulance}) -> ScenarioData\n\nUpdate ambulances in an existing scenario using a vector of Ambulance objects.\n\nCreates a new ScenarioData with modified ambulance fleet while preserving infrastructure and calls. Useful for programmatically modifying the fleet or using custom ambulance configurations.\n\nArguments\n\nscenario::ScenarioData: Original scenario\nambulances::Vector{JEMSS.Ambulance}: Vector of ambulance objects\n\nReturns\n\nScenarioData: New scenario with updated ambulances\n\n\n\n\n\n","category":"function"},{"location":"api/","page":"API Reference","title":"API Reference","text":"","category":"page"},{"location":"api/#Simulation-Execution","page":"API Reference","title":"Simulation Execution","text":"","category":"section"},{"location":"api/","page":"API Reference","title":"API Reference","text":"Execute simulations with custom or built-in strategies.","category":"page"},{"location":"api/#JEMSSWrapper.simulate_scenario","page":"API Reference","title":"JEMSSWrapper.simulate_scenario","text":"simulate_scenario(scenario::ScenarioData;\n                 moveup_strategy::Union{Nothing, AbstractMoveUpStrategy} = nothing,\n                 logger::Union{Nothing, MoveUpLogger} = nothing,\n                 time::Real = Inf, \n                 duration::Real = Inf, \n                 numEvents::Real = Inf,\n                 doPrint::Bool = false, \n                 printingInterval::Real = 1.0) -> JEMSS.Simulation\n\nHigh-level function to run a complete simulation from scenario data.\n\nConvenience wrapper that creates a simulation instance from ScenarioData and runs it with optional custom move-up strategy. Returns the completed simulation for result analysis.\n\nArguments\n\nscenario::ScenarioData: Scenario configuration loaded from TOML\nmoveup_strategy::Union{Nothing, AbstractMoveUpStrategy}: Custom relocation strategy (optional)\nlogger::Union{Nothing, MoveUpLogger}: Logger for move-up decisions (optional)\ntime::Real: Stop at this simulation time (default: Inf)\nduration::Real: Run for this duration (default: Inf)\nnumEvents::Real: Stop after this many events (default: Inf)\ndoPrint::Bool: Print progress during simulation (default: false)\nprintingInterval::Real: Time between progress prints (default: 1.0)\n\nReturns\n\nJEMSS.Simulation: Completed simulation instance with results\n\nExamples\n\n# Load and simulate with default settings\nscenario = load_scenario_from_config(\"auckland\", \"base.toml\")\nsim = simulate_scenario(scenario)\navg_response_time = get_metric(sim, :avg_response_time)\nprintln(\"Average response time: \", avg_response_time * 24 * 60, \" minutes\") \n\n\n\n\n\n","category":"function"},{"location":"api/","page":"API Reference","title":"API Reference","text":"","category":"page"},{"location":"api/#Metrics-System","page":"API Reference","title":"Metrics System","text":"","category":"section"},{"location":"api/","page":"API Reference","title":"API Reference","text":"Extract and analyze performance metrics from simulation results.","category":"page"},{"location":"api/#JEMSSWrapper.extract_all_metrics","page":"API Reference","title":"JEMSSWrapper.extract_all_metrics","text":"extract_all_metrics(sim::JEMSS.Simulation; survival_threshold::Float64 = 8.0,\n                    percentile::Float64 = 90.0) -> SimulationMetrics\n\nExtract all metrics from a simulation into a structured object.\n\n\n\n\n\n","category":"function"},{"location":"api/#JEMSSWrapper.get_metric","page":"API Reference","title":"JEMSSWrapper.get_metric","text":"get_metric(sim::JEMSS.Simulation, metric::Symbol; kwargs...) -> Union{Float64, Int, Vector{Float64}}\n\nCentral dispatcher function to extract any simulation metric by name.\n\nThis serves as a single point of control for all metric extraction, making it easier to:\n\nChange metric implementations in one place\nAdd logging or validation\nHandle errors consistently\nDocument all available metrics\n\nArguments\n\nsim::JEMSS.Simulation: Completed simulation instance\nmetric::Symbol: Name of the metric to extract\nkwargs...: Metric-specific parameters (e.g., threshold, percentile)\n\nAvailable Metrics\n\n:avg_response_time - Average response time (minutes)\n:response_times - Vector of all response times\n:survival_rate - Fraction under threshold (kwargs: threshold=8.0)\n:percentile_response_time - Nth percentile (kwargs: percentile=90.0)\n:max_response_time - Maximum response time\n:ambulance_utilization - Average busy fraction [0,1]\n:num_relocations - Total move-up relocations\n:total_distance - Total distance traveled\n:num_calls_processed - Number of processed calls\n\nReturns\n\nMetric value (type depends on metric)\n\nThrows\n\nArgumentError: If metric name is not recognized\n\nExamples\n\n# Basic usage\navg_time = get_metric(sim, :avg_response_time)\nsurvival = get_metric(sim, :survival_rate, threshold=10.0)\np95 = get_metric(sim, :percentile_response_time, percentile=95.0)\n\n# Get all times for custom analysis\ntimes = get_metric(sim, :response_times)\nmedian_time = median(times)\n\n# Error handling\ntry\n    value = get_metric(sim, :invalid_metric)\ncatch e\n    println(\"Metric not found: $e\")\nend\n\nPerformance Note\n\nFor extracting multiple metrics, consider using get_simulation_metrics() instead, which computes all metrics efficiently in fewer passes over the data.\n\n\n\n\n\n","category":"function"},{"location":"api/","page":"API Reference","title":"API Reference","text":"","category":"page"},{"location":"api/#Strategy-Interface","page":"API Reference","title":"Strategy Interface","text":"","category":"section"},{"location":"api/","page":"API Reference","title":"API Reference","text":"Implement custom ambulance relocation policies by inheriting from AbstractMoveUpStrategy and implementing the required methods. ","category":"page"},{"location":"api/#Base-Type","page":"API Reference","title":"Base Type","text":"","category":"section"},{"location":"api/#JEMSSWrapper.AbstractMoveUpStrategy","page":"API Reference","title":"JEMSSWrapper.AbstractMoveUpStrategy","text":"AbstractMoveUpStrategy\n\nAbstract type for move-up decision strategies.\n\nAll concrete move-up strategies must inherit from this type and implement the required interface methods:\n\nshould_trigger_on_dispatch(strategy, sim)\nshould_trigger_on_free(strategy, sim)  \ndecide_moveup(strategy, sim, triggering_ambulance)\n\nExample\n\nstruct MyStrategy <: AbstractMoveUpStrategy\n    param1::Float64\n    param2::Int\nend\n\nfunction should_trigger_on_dispatch(strategy::MyStrategy, sim::JEMSS.Simulation)\n    # Your logic here\n    return true  # or false\nend\n\nfunction should_trigger_on_free(strategy::MyStrategy, sim::JEMSS.Simulation)\n    # Your logic here  \n    return true  # or false\nend\n\nfunction decide_moveup(strategy::MyStrategy, sim::JEMSS.Simulation, triggering_ambulance::JEMSS.Ambulance)\n    # Your decision logic here\n    movable_ambulances = JEMSS.Ambulance[]\n    target_stations = JEMSS.Station[]\n    return (movable_ambulances, target_stations)\nend\n\n\n\n\n\n","category":"type"},{"location":"api/#Required-Interface-Methods","page":"API Reference","title":"Required Interface Methods","text":"","category":"section"},{"location":"api/#JEMSSWrapper.should_trigger_on_dispatch","page":"API Reference","title":"JEMSSWrapper.should_trigger_on_dispatch","text":"should_trigger_on_dispatch(strategy::AbstractMoveUpStrategy, sim::JEMSS.Simulation) -> Bool\n\nDetermine whether move-up should be considered when an ambulance is dispatched to a call.\n\nThis method is called whenever an ambulance receives a dispatch event (ambDispatched). The strategy should return true if it wants to trigger a move-up consideration event, or false if no move-up should be considered at this time.\n\nArguments\n\nstrategy::AbstractMoveUpStrategy: The move-up strategy instance\nsim::JEMSS.Simulation: The current simulation state\n\nReturns\n\nBool: true to trigger move-up consideration, false otherwise\n\n\n\n\n\n","category":"function"},{"location":"api/#JEMSSWrapper.should_trigger_on_free","page":"API Reference","title":"JEMSSWrapper.should_trigger_on_free","text":"should_trigger_on_free(strategy::AbstractMoveUpStrategy, sim::JEMSS.Simulation) -> Bool\n\nDetermine whether move-up should be considered when an ambulance becomes free after completing a call.\n\nThis method is called whenever an ambulance finishes serving a call (ambBecomesFree) and  there are no queued calls waiting for service. The strategy should return true if it  wants to trigger a move-up consideration event, or false if no move-up should be considered.\n\nArguments\n\nstrategy::AbstractMoveUpStrategy: The move-up strategy instance\nsim::JEMSS.Simulation: The current simulation state\n\nReturns\n\nBool: true to trigger move-up consideration, false otherwise\n\n\n\n\n\n","category":"function"},{"location":"api/#JEMSSWrapper.decide_moveup","page":"API Reference","title":"JEMSSWrapper.decide_moveup","text":"decide_moveup(strategy::AbstractMoveUpStrategy, sim::JEMSS.Simulation, triggering_ambulance::JEMSS.Ambulance) -> Tuple{Vector{JEMSS.Ambulance}, Vector{JEMSS.Station}}\n\nMake move-up decisions: determine which ambulances should move and to which stations.\n\nThis is the core decision-making method of the move-up strategy. It receives the current simulation state and the ambulance that triggered the move-up consideration, and must return which ambulances should be moved and their target stations.\n\nArguments\n\nstrategy::AbstractMoveUpStrategy: The move-up strategy instance\nsim::JEMSS.Simulation: The current simulation state\ntriggering_ambulance::JEMSS.Ambulance: The ambulance that triggered this move-up consideration\n\nReturns\n\nTuple{Vector{JEMSS.Ambulance}, Vector{JEMSS.Station}, Union{Nothing, Any}}: A tuple containing:\nVector of ambulances that should be moved\nVector of target stations (same length as ambulances vector)\nOutput data of the decide_moveup logic used for logging the decisions\n\n\n\n\n\n","category":"function"},{"location":"api/#JEMSSWrapper.initialize_strategy","page":"API Reference","title":"JEMSSWrapper.initialize_strategy","text":"initialize_strategy(strategy::AbstractMoveUpStrategy, sim::JEMSS.Simulation) -> Nothing\n\nInitialize the strategy before the simulation starts (optional).\n\nThis method is called once at the beginning of the simulation, before any events are processed. It allows strategies to perform any necessary setup or initialization based on the simulation configuration.\n\nBy default, this method does nothing. Strategies only need to implement it if they require initialization logic (e.g., allocating buffers, computing initial statistics, setting up internal state).\n\nArguments\n\nstrategy::AbstractMoveUpStrategy: The move-up strategy instance\nsim::JEMSS.Simulation: The simulation state at initialization\n\nReturns\n\nNothing\n\n\n\n\n\n","category":"function"},{"location":"api/","page":"API Reference","title":"API Reference","text":"","category":"page"},{"location":"api/#Neuronal-Strategy","page":"API Reference","title":"Neuronal Strategy","text":"","category":"section"},{"location":"api/#Encoder","page":"API Reference","title":"Encoder","text":"","category":"section"},{"location":"api/#JEMSSWrapper.AbstractEncoder","page":"API Reference","title":"JEMSSWrapper.AbstractEncoder","text":"AbstractEncoder\n\nBase type for state encoders that transform simulation state into  numerical representations suitable for neural networks.\n\nAll concrete encoders must implement:\n\nencode_state(encoder, sim, ambulance_index) -> Vector{Float32}\n\n\n\n\n\n","category":"type"},{"location":"api/#JEMSSWrapper.encode_state","page":"API Reference","title":"JEMSSWrapper.encode_state","text":"encode_state(encoder::AbstractEncoder, sim::JEMSS.Simulation, ambulance_index::Int) -> Vector{Float32}\n\nTransform the current simulation state into a numerical vector representation.\n\nArguments\n\nencoder: The encoder implementation\nsim: Current simulation state\nambulance_index: Index of the triggering ambulance\n\nReturns\n\nVector{Float32}: Encoded state suitable for neural network input\n\n\n\n\n\n","category":"function"},{"location":"api/#Neural-Network","page":"API Reference","title":"Neural Network","text":"","category":"section"},{"location":"api/#JEMSSWrapper.AbstractNeuralNetwork","page":"API Reference","title":"JEMSSWrapper.AbstractNeuralNetwork","text":"AbstractNeuralNetwork\n\nBase type for neural network architectures used in decision making.\n\nAll concrete networks must implement:\n\nforward(network, input) -> Vector{Float32}\n\n\n\n\n\n","category":"type"},{"location":"api/#JEMSSWrapper.forward","page":"API Reference","title":"JEMSSWrapper.forward","text":"forward(network::AbstractNeuralNetwork, input::Vector{Float32}) -> Vector{Float32}\n\nPerform forward pass through the neural network.\n\nArguments\n\nnetwork: The neural network\ninput: Input vector\n\nReturns\n\nVector{Float32}: Network output (typically action probabilities or station scores)\n\n\n\n\n\n","category":"function"},{"location":"api/#Strategy","page":"API Reference","title":"Strategy","text":"","category":"section"},{"location":"api/#JEMSSWrapper.NeuronalStrategy","page":"API Reference","title":"JEMSSWrapper.NeuronalStrategy","text":"NeuronalStrategy <: AbstractMoveUpStrategy\n\nNeural network-based strategy for ambulance relocation. Works with any combination of encoder and neural network.\n\nFields\n\nencoder::AbstractEncoder: State encoder\nnetwork::AbstractNeuralNetwork: Neural network for decision making\ntrigger_on_dispatch::Bool: Whether to trigger on ambulance dispatch\ntrigger_on_free::Bool: Whether to trigger when ambulance becomes free\n\n\n\n\n\n","category":"type"},{"location":"api/","page":"API Reference","title":"API Reference","text":"","category":"page"},{"location":"api/#Logging-System","page":"API Reference","title":"Logging System","text":"","category":"section"},{"location":"api/","page":"API Reference","title":"API Reference","text":"Track and analyze move-up decisions during simulations.","category":"page"},{"location":"api/#JEMSSWrapper.MoveUpLogger","page":"API Reference","title":"JEMSSWrapper.MoveUpLogger","text":"MoveUpLogger\n\nLogger for recording move-up decisions during simulation.\n\nThe logger uses an encoder to create uniform state representations across different strategies, enabling comparison and analysis of different approaches.\n\nFields\n\nencoder::AbstractEncoder: Encoder for creating uniform state representations\nentries::Vector{MoveUpLogEntry}: Logged entries (chronologically ordered)\n\nNotes\n\nThe logger is passed as an optional field to move-up strategies\nEach strategy is responsible for calling the logger within its decide_moveup method\nThe same logger can be reused across multiple simulations (clear between runs if needed)\n\n\n\n\n\n","category":"type"},{"location":"api/#JEMSSWrapper.get_entries","page":"API Reference","title":"JEMSSWrapper.get_entries","text":"get_entries(logger::MoveUpLogger) -> Vector{MoveUpLogEntry}\n\nGet all logged entries in chronological order. \n\n\n\n\n\n","category":"function"},{"location":"api/#JEMSSWrapper.clear_log!","page":"API Reference","title":"JEMSSWrapper.clear_log!","text":"clear_log!(logger::MoveUpLogger)\n\nClear all logged entries.\n\n\n\n\n\n","category":"function"},{"location":"api/#JEMSSWrapper.to_dataframe","page":"API Reference","title":"JEMSSWrapper.to_dataframe","text":"to_dataframe(logger::MoveUpLogger) -> DataFrame\n\nConvert logged entries to a DataFrame with one row per log entry.\n\nColumn structure\n\nstrategy_type: Name of the strategy used\nstate_1, state_2, ..., state_n: Encoded state dimensions, according to encoder.features_names\noutput_1, output_2, ...: Strategy output dimensions\n\nNotes\n\nState column names come from encoder.features_names\nOutput columns are numbered generically (output1, output2, etc.)\nReturns an empty DataFrame if no entries are logged\nAll entries are assumed to have the same state and output dimensions\n\n\n\n\n\n","category":"function"},{"location":"api/","page":"API Reference","title":"API Reference","text":"","category":"page"},{"location":"api/#State-Access","page":"API Reference","title":"State Access","text":"","category":"section"},{"location":"api/","page":"API Reference","title":"API Reference","text":"Utilities for querying the current state of simulation entities. These functions are designed to be used within custom move-up strategies, for post-simulation analysis, or for state encoding in machine learning applications.","category":"page"},{"location":"api/#JEMSSWrapper.get_entity_property","page":"API Reference","title":"JEMSSWrapper.get_entity_property","text":"get_entity_property(sim::JEMSS.Simulation, collection::Symbol, id::Int, property::Symbol)\n\nGet a specific property from a single entity in a simulation.\n\nThis is the core generic accessor for simulation entities. It handles special cases automatically (e.g., ambulance locations that require route updates) and provides  unified access to any entity property.\n\nArguments\n\nsim::JEMSS.Simulation: The simulation instance\ncollection::Symbol: Entity collection name (:ambulances, :stations, :hospitals, :calls)\nid::Int: Entity ID (1-indexed)\nproperty::Symbol: Property to retrieve (:status, :class, :location, :destination, :eta, etc.)\n\nReturns\n\nThe value of the requested property for the specified entity.\n\nSpecial Behavior\n\nAmbulance locations: Automatically updates route state before returning location\nAmbulance destinations: Returns the end location of the current route\nAmbulance ETA: Returns time remaining until destination (negative if overdue)\nOther properties: Direct property access without side effects\n\nThrows\n\nAssertionError: If the entity ID is out of bounds for the collection\n\nExamples\n\n# Get ambulance properties\nstatus = get_entity_property(sim, :ambulances, 1, :status)\nclass = get_entity_property(sim, :ambulances, 1, :class)\nlocation = get_entity_property(sim, :ambulances, 1, :location)      # Updates route\ndestination = get_entity_property(sim, :ambulances, 1, :destination)\neta = get_entity_property(sim, :ambulances, 1, :eta)\n\n# Get station/hospital locations\nstation_loc = get_entity_property(sim, :stations, 2, :location)\nhospital_loc = get_entity_property(sim, :hospitals, 1, :location)\n\n# Get call properties\npriority = get_entity_property(sim, :calls, 5, :priority)\n\n\n\n\n\n","category":"function"},{"location":"api/#JEMSSWrapper.get_all_entity_properties","page":"API Reference","title":"JEMSSWrapper.get_all_entity_properties","text":"get_all_entity_properties(sim::JEMSS.Simulation, collection::Symbol, property::Symbol)\n\nGet a specific property from all entities in a collection.\n\nThis is a convenience function that applies get_entity_property to all entities in the specified collection. For ambulance-specific properties (:location, :destination, :eta), it uses optimized batch functions.\n\nArguments\n\nsim::JEMSS.Simulation: The simulation instance\ncollection::Symbol: Entity collection name (:ambulances, :stations, :hospitals, :calls)\nproperty::Symbol: Property to retrieve\n\nReturns\n\nVector: Array containing the property value for each entity in the collection\n\nPerformance Notes\n\nUses specialized batch functions for ambulance locations, destinations, and ETAs\nFor other properties, uses vectorized property access\n\nExamples\n\n# Get all ambulance properties\nstatuses = get_all_entity_properties(sim, :ambulances, :status)\nlocations = get_all_entity_properties(sim, :ambulances, :location)      # Batch route updates\ndestinations = get_all_entity_properties(sim, :ambulances, :destination)\netas = get_all_entity_properties(sim, :ambulances, :eta)\n\n# Get all station/hospital locations\nstation_locs = get_all_entity_properties(sim, :stations, :location)\nhospital_locs = get_all_entity_properties(sim, :hospitals, :location)\n\n# Get all call priorities\npriorities = get_all_entity_properties(sim, :calls, :priority)\n\n\n\n\n\n","category":"function"},{"location":"api/","page":"API Reference","title":"API Reference","text":"","category":"page"},{"location":"api/#Data-Types","page":"API Reference","title":"Data Types","text":"","category":"section"},{"location":"api/","page":"API Reference","title":"API Reference","text":"Core data structures used throughout JEMSSWrapper.","category":"page"},{"location":"api/#JEMSSWrapper.ScenarioData","page":"API Reference","title":"JEMSSWrapper.ScenarioData","text":"ScenarioData\n\nImmutable container for a complete simulation scenario.\n\nStores the base simulation configuration, call history, ambulance fleet, and metadata. Designed to be reusable: multiple simulation instances can be created from the same ScenarioData without reloading files.\n\nFields\n\nbase_simulation::JEMSS.Simulation: Base simulation object with infrastructure\ncalls::Vector{JEMSS.Call}: Call/demand events\nambulances::Vector{JEMSS.Ambulance}: Ambulance fleet configuration\nmetadata::Dict{String, Any}: Additional scenario information\n\n\n\n\n\n","category":"type"},{"location":"strategies/#Strategy-Development-Guide","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Learn how to develop ambulance relocation strategies using JEMSSWrapper's extensible framework.","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"","category":"page"},{"location":"strategies/#Table-of-Contents","page":"Strategy Development Guide","title":"Table of Contents","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Undestanding Dynamic Relocation\nHow Strategies Work in JEMSSWrapper\nThe Strategy Interface\nWorking with Simulation State","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"","category":"page"},{"location":"strategies/#Understanding-Dynamic-Relocation","page":"Strategy Development Guide","title":"Understanding Dynamic Relocation","text":"","category":"section"},{"location":"strategies/#What-is-Dynamic-Ambulance-Relocation?","page":"Strategy Development Guide","title":"What is Dynamic Ambulance Relocation?","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Dynamic ambulance relocation (or move-up) is the strategic repositioning of available ambulances in response to changes in system state, typically when a unit is dispatched or completes a mission.","category":"page"},{"location":"strategies/#The-Core-Problem","page":"Strategy Development Guide","title":"The Core Problem","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"When an ambulance is dispatched, coverage in its origin area degrades, potentially leaving populations vulnerable to future emergencies. However, every relocation has costs:","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Tangible costs: Fuel, travel time, operational expenses\nIntangible costs: Staff fatigue, reduced availability during movement","category":"page"},{"location":"strategies/#The-Decision-Challenge","page":"Strategy Development Guide","title":"The Decision Challenge","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Optimal relocation strategies must balance:","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Expected benefit of improved coverage\nAssociated costs of moving ambulances\nProbability of future demands\nExpected time until busy units return to service","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Unlike multi-period relocation that plans hours ahead, dynamic relocation must make instantaneous decisions in response to real-time events with inherent uncertainty.","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"","category":"page"},{"location":"strategies/#How-Strategies-Work-in-JEMSSWrapper","page":"Strategy Development Guide","title":"How Strategies Work in JEMSSWrapper","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Strategies control two key aspects:","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"When to consider relocations (trigger conditions)\nWhich ambulances to move and where to send them","category":"page"},{"location":"strategies/#The-Strategy-Interface","page":"Strategy Development Guide","title":"The Strategy Interface","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Every strategy implements three methods:","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"using JEMSSWrapper\n\nstruct MyStrategy <: AbstractMoveUpStrategy end\n\n# Trigger on dispatch events?\nJEMSSWrapper.should_trigger_on_dispatch(::MyStrategy, sim) = true\n\n# Trigger on free events?\nJEMSSWrapper.should_trigger_on_free(::MyStrategy, sim) = false\n\n# Decide relocations\nfunction JEMSSWrapper.decide_moveup(::MyStrategy, sim, amb)\n    return ([], [], [])  # (ambulances_to_move, target_stations, metadata_decision)\nend","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Test it:","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"scenario = load_scenario_from_config(\"auckland\", \"config.toml\")\nsim = simulate_scenario!(sim; moveup_strategy=MyStrategy())","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"","category":"page"},{"location":"strategies/#Strategy-Basic-Example","page":"Strategy Development Guide","title":"Strategy Basic Example","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Respond when ambulances become free by filling coverage gaps:","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"struct FillEmptyStations <: AbstractMoveUpStrategy end\n\nshould_trigger_on_dispatch(::FillEmptyStations, sim) = false\nshould_trigger_on_free(::FillEmptyStations, sim) = true\n\nfunction decide_moveup(::FillEmptyStations, sim, freed_amb)\n    # Find first empty station\n    for station in sim.stations\n        ambs_here = count(\n            a -> a.status == ambulanceFree && a.station == station,\n            sim.ambulances\n        )\n        if ambs_here == 0\n            return ([freed_amb], [station])\n        end\n    end\n    \n    return ([], [])  # All stations covered\nend","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"","category":"page"},{"location":"strategies/#Working-with-Simulation-State","page":"Strategy Development Guide","title":"Working with Simulation State","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"JEMSSWrapper provides two main functions to extract information from a running simulation:","category":"page"},{"location":"strategies/#get_entity_property","page":"Strategy Development Guide","title":"get_entity_property","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Retrieves a specific property from a single entity. Handles special cases automatically (e.g., ambulance locations that require route updates).","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"# Get ambulance status\nstatus = get_entity_property(sim, :ambulances, 1, :status)\n\n# Get station location\nlocation = get_entity_property(sim, :stations, 2, :location)","category":"page"},{"location":"strategies/#get_all_entity_properties","page":"Strategy Development Guide","title":"get_all_entity_properties","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Retrieves the same property from all entities in a collection. Uses optimized batch operations when available.","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"# Get all ambulance statuses\nstatuses = get_all_entity_properties(sim, :ambulances, :status)\n\n# Get all hospital locations\nlocations = get_all_entity_properties(sim, :hospitals, :location)","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Both functions work with the main entity collections: :ambulances, :stations, :hospitals, and :calls.","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"For complete details about all available state, enums, structures and how to extract information from them see the Simulation State Reference.","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"","category":"page"},{"location":"strategies/#See-also","page":"Strategy Development Guide","title":"See also","text":"","category":"section"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Now that you understand how to write strategies, explore:","category":"page"},{"location":"strategies/","page":"Strategy Development Guide","title":"Strategy Development Guide","text":"Simulation State Reference - Complete details on all available state\nNeural Network Strategy - Relocation strategy with neural networks \nAPI Reference - Complete function documentation","category":"page"},{"location":"simulation_state/#Simulation-State-Reference","page":"Simulation State","title":"Simulation State Reference","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Complete technical reference for accessing and understanding the simulation state when implementing move-up strategies in JEMSSWrapper.","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Note: This page documents the core data structures from JEMSS.jl that are accessible in move-up strategies.","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"","category":"page"},{"location":"simulation_state/#Table-of-Contents","page":"Simulation State","title":"Table of Contents","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Overview\nSimulation Structure\nEntities and Attributes\nEnumerations\nAccessing State Information\nAdvanced Access","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"","category":"page"},{"location":"simulation_state/#Overview","page":"Simulation State","title":"Overview","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"When implementing a move-up strategy, your decide_moveup function receives a sim::Simulation object containing the complete state of the emergency medical system. This state can be accessed using the utility functions described below, which handle special cases and optimizations automatically.","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"function decide_moveup(strategy::MyStrategy, sim, ambulance)\n    # Use get_entity_property and get_all_entity_properties\n    # to safely access simulation state\n    \n    # Your decision logic...\nend","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"","category":"page"},{"location":"simulation_state/#Simulation-Structure","page":"Simulation State","title":"Simulation Structure","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"JEMSS works with a Simulation object that contains all the simulation state:","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"mutable struct Simulation\n    # Time\n    startTime::Float\n    time::Float\n    endTime::Float\n\n    # World\n    net::Network\n    travel::Travel\n    map::Map\n    grid::Grid\n\n    # Main entities \n    ambulances::Vector{Ambulance}\n    calls::Vector{Call}\n    hospitals::Vector{Hospital}\n    stations::Vector{Station}\n\n    # Convenience:\n    numAmbs::Int\n    numCalls::Int\n    numHospitals::Int\n    numStations::Int\n\n    ...\n\n    # Other important fields \n    mobilisationDelay::MobilisationDelay\n    demand::Demand\n    demandCoverage::DemandCoverage\n    stats::SimStats\n\n    ...\n\n    Simulation() = new(nullTime, nullTime, nullTime, ...)\nend","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Complete struct: Simulation struct in JEMSS.jl","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"","category":"page"},{"location":"simulation_state/#Entities-and-Attributes","page":"Simulation State","title":"Entities and Attributes","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Entity Attribute Type Description\nAmbulance index Int Unique ambulance identifier\n status AmbStatus Operational state (see Ambulance States)\n stationIndex Int Assigned base station ID\n callIndex Int Currently assigned call ID (if applicable)\n class AmbClass Ambulance type (see Ambulance Classes)\n route.startLoc Location Route start location\n route.endLoc Location Route destination location\n route.startTime Float Route start time (days)\n route.endTime Float Route end time (days)\n route.priority Priority Travel priority level (see Priority Levels)\nCall index Int Unique call identifier\n location Location Emergency location (lat/lon coordinates)\n priority Priority Priority level (see Priority Levels)\n transport Bool Whether hospital transport is required\n hospitalIndex Int Destination hospital ID (if applicable)\nStation index Int Unique identifier\n location Location Station location (lat/lon coordinates)\n capacity Int Maximum ambulance capacity\nHospital index Int Unique identifier\n location Location Hospital location (lat/lon coordinates)\nGlobal State time Float Current simulation time (days from start)\n startTime Float Simulation start time\n endTime Float Simulation end time","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Note: Location objects contain x (longitude) and y (latitude) coordinates in decimal degrees.\nAmbulance route information is only valid when actively traveling (states 3, 5, 8, 9).\nFrom an ambulance's route, you can extract its current position and estimated time of arrival (ETA) to destination.\nWhen idle at a station, ambulance location corresponds to stations[stationIndex].location.\nUse get_entity_property(sim, :ambulances, id, :location) for automatic position calculation.","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"","category":"page"},{"location":"simulation_state/#Enumerations","page":"Simulation State","title":"Enumerations","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"JEMSS defines several enumeration types to represent categorical states and properties in the simulation. These enumerations provide type-safe identifiers for ambulance classes, priority levels, and operational states.","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Complete definitions: defs.jl in JEMSS.jl","category":"page"},{"location":"simulation_state/#Ambulance-Classes","page":"Simulation State","title":"Ambulance Classes","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Value Description\nals Advanced Life Support - Paramedics with advanced medical capabilities\nbls Basic Life Support - Emergency Medical Technicians with basic care","category":"page"},{"location":"simulation_state/#Priority-Levels","page":"Simulation State","title":"Priority Levels","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Value Level Description\nlowPriority 3 Non-urgent cases\nmedPriority 2 Moderate urgency\nhighPriority 1 Critical, life-threatening emergencies","category":"page"},{"location":"simulation_state/#Ambulance-States","page":"Simulation State","title":"Ambulance States","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Value ID Description\nambNullStatus 0 Null/undefined state\nambIdleAtStation 1 At station, available for dispatch\nambMobilising 2 Preparing to depart\nambGoingToCall 3 En route to emergency\nambAtCall 4 On scene attending to patient\nambGoingToHospital 5 Transporting patient to hospital\nambAtHospital 6 At hospital (patient transfer)\nambFreeAfterCall 7 Just finished call, ready for next assignment\nambReturningToStation 8 Returning to base station\nambMovingUpToStation 9 Relocating to another station (move-up)\nambSleeping 10 Out of service","category":"page"},{"location":"simulation_state/#Call-States","page":"Simulation State","title":"Call States","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Value ID Description\ncallNullStatus 0 Null/undefined state\ncallScreening 1 Under initial evaluation\ncallQueued 2 In queue, waiting for assignment\ncallWaitingForAmb 3 Assigned, waiting for ambulance arrival\ncallOnSceneTreatment 4 Ambulance on scene, treating patient\ncallGoingToHospital 5 Patient being transported\ncallAtHospital 6 Patient transfer at hospital\ncallProcessed 7 Incident completed and closed","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"","category":"page"},{"location":"simulation_state/#Accessing-State-Information","page":"Simulation State","title":"Accessing State Information","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"JEMSSWrapper provides two main utility functions to access simulation state safely and efficiently, handling special cases automatically.","category":"page"},{"location":"simulation_state/#get_entity_property-Single-Entity-Access","page":"Simulation State","title":"get_entity_property - Single Entity Access","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Retrieves a specific property from one entity. This is the recommended way to access entity data as it handles special cases automatically.","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"get_entity_property(sim, collection, id, property_name)","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Arguments:","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"sim::Simulation: The simulation instance\ncollection::Symbol: Entity type (:ambulances, :stations, :hospitals, :calls)\nid::Int: Entity identifier (1-indexed)\nproperty_name::Symbol: Property to retrieve","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Basic Examples:","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"# Ambulance properties\nstatus = get_entity_property(sim, :ambulances, 1, :status)\nclass = get_entity_property(sim, :ambulances, 1, :class)\nstation = get_entity_property(sim, :ambulances, 1, :stationIndex)\n\n# Station properties\nlocation = get_entity_property(sim, :stations, 5, :location)\ncapacity = get_entity_property(sim, :stations, 5, :capacity)\n\n# Hospital properties\nhospital_loc = get_entity_property(sim, :hospitals, 2, :location)\n\n# Call properties\npriority = get_entity_property(sim, :calls, 10, :priority)\ntransport = get_entity_property(sim, :calls, 10, :transport)","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Special Ambulance Properties:","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"For ambulances, three computed properties have special handling:","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"# Current location (automatically updates route state)\nlocation = get_entity_property(sim, :ambulances, 1, :location)\n\n# Destination location (route.endLoc)\ndestination = get_entity_property(sim, :ambulances, 1, :destination)\n\n# Estimated time of arrival in days (negative if overdue)\neta = get_entity_property(sim, :ambulances, 1, :eta)","category":"page"},{"location":"simulation_state/#get_all_entity_properties-Batch-Access","page":"Simulation State","title":"get_all_entity_properties - Batch Access","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Retrieves the same property from all entities in a collection. Uses optimized batch operations for ambulance special properties.","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"get_all_entity_properties(sim, collection, property_name)","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Arguments:","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"sim::Simulation: The simulation instance\ncollection::Symbol: Entity type (:ambulances, :stations, :hospitals, :calls)\nproperty_name::Symbol: Property to retrieve","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Returns: Vector containing the property value for each entity.","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Examples:","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"# All ambulance statuses\nstatuses = get_all_entity_properties(sim, :ambulances, :status)\n\n# All ambulance locations (batch route updates)\nlocations = get_all_entity_properties(sim, :ambulances, :location)\n\n# All ambulance destinations\ndestinations = get_all_entity_properties(sim, :ambulances, :destination)\n\n# All ambulance ETAs\netas = get_all_entity_properties(sim, :ambulances, :eta)\n\n# All station locations\nstation_locs = get_all_entity_properties(sim, :stations, :location)\n\n# All call priorities\npriorities = get_all_entity_properties(sim, :calls, :priority)","category":"page"},{"location":"simulation_state/#Usage-in-Move-Up-Strategies","page":"Simulation State","title":"Usage in Move-Up Strategies","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"These functions are particularly useful when implementing custom strategies:","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"function decide_moveup(strategy::MyStrategy, sim, ambulance)\n    # Get all ambulance locations efficiently\n    all_locations = get_all_entity_properties(sim, :ambulances, :location)\n    \n    # Get specific ambulance destination\n    my_destination = get_entity_property(sim, :ambulances, ambulance.index, :destination)\n    \n    # Check ETAs for all ambulances\n    all_etas = get_all_entity_properties(sim, :ambulances, :eta)\n    \n    # Get all station locations\n    station_locs = get_all_entity_properties(sim, :stations, :location)\n    \n    # Your decision logic here...\n    return target_station_index\nend","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"","category":"page"},{"location":"simulation_state/#Advanced-Access","page":"Simulation State","title":"Advanced Access","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"While get_entity_property and get_all_entity_properties cover most common use cases, advanced strategies can access other simulation components directly. This includes time information (sim.time, sim.startTime, sim.endTime), spatial data structures (sim.net, sim.travel, sim.map, sim.grid), entity counts (sim.numAmbs, sim.numStations, etc.), and other components like sim.mobilisationDelay, sim.demand, and sim.stats. Direct access is useful for strategies requiring network analysis, spatial computations, or custom metrics beyond basic entity properties.","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"For implementation details of these data structures, refer to the JEMSS.jl source code.","category":"page"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"","category":"page"},{"location":"simulation_state/#See-Also","page":"Simulation State","title":"See Also","text":"","category":"section"},{"location":"simulation_state/","page":"Simulation State","title":"Simulation State","text":"Strategy Development Guide - Practical guide with examples\nJEMSS.jl Repository - Original simulator\nAPI Reference - JEMSSWrapper functions","category":"page"},{"location":"jemss_vs_wrapper/#JEMSS.jl-vs-JEMSSWrapper.jl","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"","category":"section"},{"location":"jemss_vs_wrapper/#Implementacin-de-estrategias-de-relocalizacin","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"Implementacin de estrategias de relocalizacin","text":"","category":"section"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"En JEMSS.jl, para utilizar una estrategia de relocalizacin dinmica de ambulancias en una simulacin, en el momento de inicializarla se especfica la estrategia y se construye un objeto auxiliar moveUpData que define cmo ser la poltica de decisin, a la que se puede denominar MoveUpPolice. Cuando se ejecuta la simulacin, internamente se utiliza la funcin simulateEventConsiderMoveUp! para crear los eventos de decisin de relocalizacin de ambulancias, y se calculan las relocalizaciones a ejecutar. Adems, durante la propia simulacin cuando una ambulancias es despachada y vuelve a estar disponible, el simulador crea un nuevo evento para considerar una relocalizacin sea cual sea la estrategia de relocalizacin. Esto supone que dentro de propia la lgica de la poltica de decisin MoveUpPolice, se decide si cuando una ambulancia es despachada o vuelve a estar disponible se debe tomar una decisin de relocalizacin o no.","category":"page"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"En general, para implementar una nueva estretaga de relocalizacin en JEMSS, es necesario crear un nuevo mdulo MoveUpDataPolice (de la clase MoveUpData) y la funcin MoveUpPolice que estima la relocalizacin de las ambulancias cuando se da el evento correspondiente. Despus, habra que definir una nueva forma de initicializacin (initSimMoveUpPolice) de la simulacin para la nueva estrategia. De esta forma, para cada nueva simulacin se definir el objeto moveUpData que determinar el comportamiento de MoveUpPolice de relocalizacin de ambulancias con el que se estimarn las relocalizaciones durantes la simulacin. Finalmente, habra que modificar simulateEventConsiderMoveUp! para que incluya la nueva estretegia de decisin. ","category":"page"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"Esto supone que para la implementacin de una nueva estrategia MoveUp hay que hacer la siguiente serie de cambios en JEMSS.jl:","category":"page"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"Modificar JEMSS.jl/src/types/types.jl: definir una nueva clase de tipo MoveUpDataType e incluirla en la clase MoveUpData.\nAadir JEMSS.jl/src/decision/move_up/new_police.jl: un nuevo mdulo con las funciones initSimMoveUpPolice y MoveUpPolice.\nModificar JEMSS.jl/src/simulation.jl: incluir en simulateEventConsiderMoveUp! la nueva poltica MoveUpPolice y lo mismo con el nuevo tipo de MoveUpDataType en las simulateEventAmbDispached! y simulateEventAmbBecomesFree!.","category":"page"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"En el caso de JEMSSWrapper.jl se extiende la lgida del simulador original aadiendo una clase abstracta AbstractMoveUpStrategy con sus mtodos propios para simular los eventos de relocalizacin. De esta forma, para crear una nueva estrategia de relocalizacin, nicamente es necesario crear una nueva clase de tipo AbstractMoveUpStrategy y sus mtodos obligratorios: should_trigger_on_dispatch, should_trigger_on_free y decide_moveup, aunque segn la estrategia se podran crear otros personalizados. Esto evita modificar manualmente otros mdulos y da ms libertad a la hora de implementar diferentes estrategias. Con esta nueva clase, se desarrolla una nueva funcin simulate! denominada simulate_custom!.","category":"page"},{"location":"jemss_vs_wrapper/#Replicacin-de-simulaciones","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"Replicacin de simulaciones","text":"","category":"section"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"La algoritmos de neuroevolucin requiren de la evaluacin de muchos individuos, que corresponden a las polticas de decisin de relocalizacin. Cada individuo es una red neuronal artificial (ANN) y aunque pueden compartir caractersticas, como la topologa de la red, cada individuo es diferente (o la inmensa mayora). Como todos los individuos tienen que ser evaluados en un mismo escenario con las mismas llamadas y ambulancias, se necesita hacer replicacin de las simulaciones utilizando una ANN en cada una de ellas.","category":"page"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"El propio JEMSS.jl carece de una funcionalidad tan especfica y aunque trae otras para crear y ejecutar simulaciones, estas no permiten del todo implementar la lgica requerida para las replicaciones necesaria para neuroevolucin. ","category":"page"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"Es por eso que JEMSSWrapper.jl crea desde cero las herramientas para simular mismos escenarios con diferentes polticas de relocalizacin pensando en los algoritmos de neuroevolucin. Utilizando la funcin create_simulation_instance es posible crear una nueva instancia de simulacin equivalente a una simulacin base y utilizar simulate_custom!(sim, strategy), para ejecutar la simulacin con una estrategia determinada (y ANN).","category":"page"},{"location":"jemss_vs_wrapper/#Carga-de-configuracin-e-inicializacin-de-simulaciones","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"Carga de configuracin e inicializacin de simulaciones","text":"","category":"section"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"La forma en la que JEMSS.jl crea una simulacin comienza con cargar un archivo de configuracin XML. En este se definen todos los datos necesarios: hospitales, estaciones, tiempos de viaje, etc. Se incluyen las llamadas, ambulancias y las estrategias de decisin a utilizar en la simulacin. Utilizando este archivo, el simulador inicializa la simulacin y despus est lista para ejecutarse.","category":"page"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"En cambio, JEMSSWrapper.jl sigue la misma idea, pero separa los elementos de la configuracin. Utiliza un archivo de configuracion TOML para definir los aspectos bsicos inmutables como los hospitalas, la red de carreteras, demanda, etc. Con esto se inicializa una simulacin base. Despus, se utiliza un archivo con las ambulancias y llamadas para posteriormente inicializarlas. Hasta este punto, se construye una instancia de ScenarioData y la simulacin est lista para ejecutarse. La ventaja en este punto est en la creacin de replicas con diferentes estrategias de relocalizacin, ya que  create_simulation_instance est pensada para recibir un objeto ScenarioData con el que crear la nueva instancia de simulacin. Adems, al separar los elementos inmutables de las ambulancias y llamadas, hay una mayor flexibilidad para probar con diferentes ubicaciones iniciales de ambulancias y conjuntos de llamadas.","category":"page"},{"location":"jemss_vs_wrapper/#Otras-consideraciones-de-JEMSSWrapper.jl","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"Otras consideraciones de JEMSSWrapper.jl","text":"","category":"section"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"En general, todo lo que se puede hacer con JEMSS.jl se puede hacer de igual forma con JEMSSWrapper.jl, ya que todas las funcionalidades del simulador original pueden ser llamadas con el wrapper. Las limitaciones y desventajas estn en la lgica especfica implementada en el wrapper.","category":"page"},{"location":"jemss_vs_wrapper/","page":"JEMSS.jl vs JEMSSWrapper.jl","title":"JEMSS.jl vs JEMSSWrapper.jl","text":"El simulador JEMSS tiene dos elementos que afectan el comportamiento de una simulacin. El primero determina la estrategia a la hora de aadir llamadas a la cola de llamadas, addCallToQueue!, cuya estrategia por defecto es addCallToQueueSortPriorityThenTime!. La segunda define la estrategia de despacho de ambulancias, findAmbToDispatch!, que tiene como valor por defecto la estrategia de findNearestDispatchableAmb!. Estos dos valores por defecto son fijos durante la inicializacin de una simulacin utilizando JEMSSWrapper, y no hay una utilidad especfica para modificarlas. ","category":"page"},{"location":"#JEMSSWrapper.jl","page":"Home","title":"JEMSSWrapper.jl","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"A Julia wrapper for JEMSS.jl designed to facilitate custom ambulance relocation strategies through evoluation and neuroevolution","category":"page"},{"location":"#Overview","page":"Home","title":"Overview","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"JEMSSWrapper.jl provides a clean, extensible interface to the JEMSS.jl emergency medical services simulator. It enables researchers to develop and test custom dynamic ambulance relocation policies without modifying the core simulator.","category":"page"},{"location":"","page":"Home","title":"Home","text":"Key Features:","category":"page"},{"location":"","page":"Home","title":"Home","text":"Dynamic relocation strategies: Create custom strategies using an abstract class without modifying the simulator internally.\nReplication with policy changes: Designed for move-up policie optimization with evoluation based worflows, that require running multiple simulations with different parameters.  \nTOML-based configuration: configuration with TOML files instead of XML, plus a scenario object for easier call and ambulance set modifications.","category":"page"},{"location":"#Quick-Start","page":"Home","title":"Quick Start","text":"","category":"section"},{"location":"#Installation","page":"Home","title":"Installation","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"using Pkg\n\n# Option 1: installing from a local repository\nPkg.develop(path=\"/path/to/JEMSSWrapper.jl\")\n\n# Option 2: installing from GitHub repository\nPkg.add(url=\"https://github.com/2gomez/JEMSSWrapper.jl\")","category":"page"},{"location":"#Basic-Simulation","page":"Home","title":"Basic Simulation","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"using JEMSSWrapper\n\n# Load scenario\nscenario = load_scenario_from_config(\"auckland\", \"base.toml\")\n\n# Define a custom strategy\nstruct MyStrategy <: AbstractMoveUpStrategy end\n\nJEMSSWrapper.should_trigger_on_dispatch(::MyStrategy, sim) = true\nJEMSSWrapper.should_trigger_on_free(::MyStrategy, sim) = false\nJEMSSWrapper.decide_moveup(::MyStrategy, sim, amb) = ([], [], [])\n\n# Run a simulation instance from the scenario\nsim = simulate_scenario!(sim; moveup_strategy=MyStrategy())\n\n# Get results\navg_response_time = get_metric(sim, :avg_response_time) # in days\nprintln(\"Average response time: $(avg_response_time * 24 * 60) minutes\") ","category":"page"},{"location":"#License","page":"Home","title":"License","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"JEMSSWrapper.jl code is released into the public domain under the Unlicense.","category":"page"},{"location":"","page":"Home","title":"Home","text":"This package depends on JEMSS.jl, which is licensed under Apache License 2.0. Users must comply with Apache 2.0 terms for the JEMSS.jl dependency.","category":"page"},{"location":"neural_strategy/#Neural-Network-Strategy","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"","category":"section"},{"location":"neural_strategy/#Overview","page":"Neural Network Strategy","title":"Overview","text":"","category":"section"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"The NeuronalStrategy materializes the integration of neural networks as decision-making policies pi_theta, where theta represents the network weights. This strategy serves as the foundation for all neuroevolution algorithms implemented in JEMSSWrapper.","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"The architecture combines two fundamental components through composition:","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"mutable struct NeuronalStrategy <: AbstractMoveUpStrategy\n    encoder::AbstractEncoder           # Implements function E\n    network::AbstractNeuralNetwork     # Implements function f_\n    trigger_on_dispatch::Bool          # Activation on dispatch\n    trigger_on_free::Bool              # Activation on free\nend","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"","category":"page"},{"location":"neural_strategy/#Key-Concepts","page":"Neural Network Strategy","title":"Key Concepts","text":"","category":"section"},{"location":"neural_strategy/#State-Encoding","page":"Neural Network Strategy","title":"State Encoding","text":"","category":"section"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"Neural networks require numerical input. The encoder transforms the simulation state into a vector:","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"mathbfx_t = E(s_t)","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"where E is the encoder function, s_t is the current state, and mathbfx_t in mathbbR^d is the encoded representation.","category":"page"},{"location":"neural_strategy/#Network-Output","page":"Neural Network Strategy","title":"Network Output","text":"","category":"section"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"The neural network processes the encoded state and outputs scores for each station:","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"mathbfz_t = f_theta(mathbfx_t)","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"where f_theta is the neural network and mathbfz_t in mathbbR^M contains scores for all M stations.","category":"page"},{"location":"neural_strategy/#Action-Selection","page":"Neural Network Strategy","title":"Action Selection","text":"","category":"section"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"The strategy selects the station with the highest score:","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"j^* = argmax_j in 1ldotsM z_tj","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"This determines which station the ambulance should relocate to.","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"","category":"page"},{"location":"neural_strategy/#Architecture-Design","page":"Neural Network Strategy","title":"Architecture Design","text":"","category":"section"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"This architecture completely decouples:","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"State representation (encoder E) \nDecision policy (network f_theta)","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"This separation allows combining different encoders with different neural network architectures, providing maximum flexibility for experimentation.","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"","category":"page"},{"location":"neural_strategy/#Usage-Example","page":"Neural Network Strategy","title":"Usage Example","text":"","category":"section"},{"location":"neural_strategy/#Basic-Setup","page":"Neural Network Strategy","title":"Basic Setup","text":"","category":"section"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"using JEMSSWrapper\n\n# Load scenario\nscenario = load_scenario_from_config(\"path/to/config.toml\")\n\n# Create encoder (assuming you have a custom encoder)\nencoder = MyCustomEncoder(\n    num_stations=length(scenario.stations),\n    encoding_dim=64\n)\n\n# Create neural network (assuming you have a custom network)\nnetwork = MyNeuralNetwork(\n    input_dim=64,\n    output_dim=length(scenario.stations)\n)\n\n# Create neuronal strategy\nstrategy = NeuronalStrategy(\n    encoder, \n    network;\n    trigger_on_dispatch=false,\n    trigger_on_free=true\n)\n\n# Run simulation\nresults = simulate_scenario(scenario, strategy)","category":"page"},{"location":"neural_strategy/#Custom-Encoder-Example","page":"Neural Network Strategy","title":"Custom Encoder Example","text":"","category":"section"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"# Define custom encoder\nstruct MyEncoder <: AbstractEncoder\n    num_stations::Int\n    encoding_dim::Int\nend\n\n# Implement required method\nfunction encode_state(\n    encoder::MyEncoder, \n    sim::JEMSS.Simulation, \n    ambulance_index::Int\n)::Vector{Float64}\n    # Extract relevant information\n    ambulance = sim.ambulances[ambulance_index]\n    \n    # Build encoded state vector\n    encoded = Float64[]\n    \n    # Add ambulance features\n    push!(encoded, ambulance.station.index / encoder.num_stations)\n    push!(encoded, length(sim.calls) / 100.0)\n    \n    # Add station occupancy features\n    for station in sim.stations\n        available = count(a -> a.status == ambulanceIdle && \n                             a.station.index == station.index, \n                           sim.ambulances)\n        push!(encoded, available / length(sim.ambulances))\n    end\n    \n    # Pad or truncate to encoding_dim\n    while length(encoded) < encoder.encoding_dim\n        push!(encoded, 0.0)\n    end\n    \n    return encoded[1:encoder.encoding_dim]\nend","category":"page"},{"location":"neural_strategy/#Custom-Neural-Network-Example","page":"Neural Network Strategy","title":"Custom Neural Network Example","text":"","category":"section"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"# Define custom network\nstruct SimpleFFN <: AbstractNeuralNetwork\n    weights::Matrix{Float64}\n    bias::Vector{Float64}\nend\n\n# Implement required method\nfunction forward(\n    network::SimpleFFN, \n    input::Vector{Float64}\n)::Vector{Float64}\n    # Simple feedforward computation\n    output = network.weights * input .+ network.bias\n    return output\nend","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"","category":"page"},{"location":"neural_strategy/#Integration-with-Neuroevolution","page":"Neural Network Strategy","title":"Integration with Neuroevolution","text":"","category":"section"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"The NeuronalStrategy is designed to work seamlessly with neuroevolution algorithms. The strategy's mutable nature allows algorithms to:","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"Modify network weights during evolution\nEvaluate fitness through simulation\nSelect and reproduce successful policies","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"Example workflow with a genetic algorithm:","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"# Initialize population of strategies\npopulation = [\n    NeuronalStrategy(encoder, create_random_network())\n    for _ in 1:population_size\n]\n\n# Evolution loop\nfor generation in 1:num_generations\n    # Evaluate fitness\n    fitness = [evaluate(strategy, scenario) for strategy in population]\n    \n    # Select parents\n    parents = selection(population, fitness)\n    \n    # Create offspring\n    offspring = crossover_and_mutate(parents)\n    \n    # Replace population\n    population = offspring\nend\n\n# Use best strategy\nbest_strategy = population[argmax(fitness)]\nfinal_results = simulate_scenario(scenario, best_strategy)","category":"page"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"","category":"page"},{"location":"neural_strategy/#See-Also","page":"Neural Network Strategy","title":"See Also","text":"","category":"section"},{"location":"neural_strategy/","page":"Neural Network Strategy","title":"Neural Network Strategy","text":"Strategy Development Guide - General strategy development guide\nSimulation State Reference - Complete details on all available state \nAPI Reference - Complete function documentation","category":"page"},{"location":"scenario_configuration/#Scenarios-and-Configuration","page":"Scenario Configuration","title":"Scenarios & Configuration","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Learn how to configure and work with simulation scenarios in JEMSSWrapper.","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"","category":"page"},{"location":"scenario_configuration/#Table-of-Contents","page":"Scenario Configuration","title":"Table of Contents","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Directory Structure\nConfiguration Files\nLoading Scenarios\nModifying Scenarios\nCreating New Scenarios","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"","category":"page"},{"location":"scenario_configuration/#Directory-Structure","page":"Scenario Configuration","title":"Directory Structure","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Scenarios are organized in a standard directory structure:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"scenarios/\n auckland/\n     configs/\n        base.toml\n        peak_hours.toml\n        reduced_fleet.toml\n     models/              # Link or copy of JEMSS model files\n         hospitals/\n         stations/\n         travel/\n         ambulances/\n         calls/\n         ...","category":"page"},{"location":"scenario_configuration/#Setting-the-Scenarios-Directory","page":"Scenario Configuration","title":"Setting the Scenarios Directory","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"By default, JEMSSWrapper looks for scenarios in examples/scenarios. Customize this location:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"scenario = load_scenario_from_config(\"auckland\", \"base.toml\";\n                                     scenarios_dir=\"/path/to/scenarios\")","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"","category":"page"},{"location":"scenario_configuration/#Configuration-Files","page":"Scenario Configuration","title":"Configuration Files","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Configuration files use TOML format and define all data files needed for a scenario.","category":"page"},{"location":"scenario_configuration/#Complete-Example","page":"Scenario Configuration","title":"Complete Example","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"[metadata]\nname = \"auckland_base\"\nscenario_name = \"auckland\"\ndescription = \"Auckland scenario with standard configuration\"\nmodels_dir = \"models\"  # relative to scenarios/auckland/\n\n[files]\n# Infrastructure (required)\nhospitals = \"hospitals/hospitals_1.csv\"\nstations = \"stations/stations_1.csv\"\nnodes = \"travel/roads/nodes.csv\"\narcs = \"travel/roads/arcs.csv\"\nmap = \"maps/map_1.csv\"\ntravel = \"travel/travel/travel_1.csv\"\npriorities = \"misc/call priorities/priorities_1.csv\"\nstats = \"calls/single/train/stats_control.csv\"\n\n# Travel network cache (auto-generated if missing)\nr_net_travels = \"travel/roads/r_net_travels.jls\"\n\n# Optional demand modeling\n# demand = \"demand/demand_1.csv\"\n# demand_coverage = \"demand/coverage/demand_coverage_1.csv\"\n\n[defaults]\n# Default data files (can be overridden when loading)\nambulances = \"ambulances/ambulances_1.csv\"\ncalls = \"calls/single/train/gen_config.xml\"","category":"page"},{"location":"scenario_configuration/#Configuration-Sections","page":"Scenario Configuration","title":"Configuration Sections","text":"","category":"section"},{"location":"scenario_configuration/#[metadata]","page":"Scenario Configuration","title":"[metadata]","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Basic scenario information:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"name: Unique identifier for this configuration\nscenario_name: Must match the directory name\ndescription: Human-readable description\nmodels_dir: Directory containing model files (relative to scenario directory)","category":"page"},{"location":"scenario_configuration/#[files]","page":"Scenario Configuration","title":"[files]","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"All paths are relative to scenarios/{scenario_name}/{models_dir}/.","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Required files:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"hospitals, stations: Infrastructure locations and capacities\nnodes, arcs: Road network definition\nmap: Geographic map data\ntravel: Travel time configuration\npriorities: Call priority definitions\nstats: Statistical configuration","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Auto-generated:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"r_net_travels: Serialized travel network (computed from nodes/arcs on first run)","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Optional:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"demand, demand_coverage: Demand modeling (can be commented out or omitted)","category":"page"},{"location":"scenario_configuration/#[defaults]","page":"Scenario Configuration","title":"[defaults]","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Default ambulances and calls files. Can be overridden when loading the scenario.","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"","category":"page"},{"location":"scenario_configuration/#Loading-Scenarios","page":"Scenario Configuration","title":"Loading Scenarios","text":"","category":"section"},{"location":"scenario_configuration/#Basic-Loading","page":"Scenario Configuration","title":"Basic Loading","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"# Load with default ambulances and calls from config\nscenario = load_scenario_from_config(\"auckland\", \"base.toml\")","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"This loads:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Config: scenarios/auckland/configs/base.toml\nModels: scenarios/auckland/models/...\nDefault ambulances and calls from [defaults] section","category":"page"},{"location":"scenario_configuration/#Custom-Data-Files","page":"Scenario Configuration","title":"Custom Data Files","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Override default ambulances or calls:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"# Custom calls only\nscenario = load_scenario_from_config(\"auckland\", \"base.toml\";\n                                     calls_path=\"data/peak_hours_calls.csv\")\n\n# Custom ambulances and calls\nscenario = load_scenario_from_config(\"auckland\", \"base.toml\";\n                                     ambulances_path=\"data/fleet_15.csv\",\n                                     calls_path=\"data/test_calls.csv\")","category":"page"},{"location":"scenario_configuration/#Multiple-Configurations","page":"Scenario Configuration","title":"Multiple Configurations","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Load different configurations of the same scenario:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"# Standard configuration\nbase = load_scenario_from_config(\"auckland\", \"base.toml\")\n\n# Peak hours scenario\npeak = load_scenario_from_config(\"auckland\", \"peak_hours.toml\")\n\n# Budget constraints\nbudget = load_scenario_from_config(\"auckland\", \"reduced_fleet.toml\")","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"","category":"page"},{"location":"scenario_configuration/#Modifying-Scenarios","page":"Scenario Configuration","title":"Modifying Scenarios","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Once loaded, scenarios can be modified without reloading infrastructure.","category":"page"},{"location":"scenario_configuration/#Update-Calls","page":"Scenario Configuration","title":"Update Calls","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Test different demand patterns on the same infrastructure:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"# Load base scenario\nbase_scenario = load_scenario_from_config(\"auckland\", \"base.toml\")\n\n# Update with different call patterns\npeak_scenario = update_scenario_calls(base_scenario, \"data/peak_calls.csv\")\nnight_scenario = update_scenario_calls(base_scenario, \"data/night_calls.csv\")","category":"page"},{"location":"scenario_configuration/#Update-Ambulances","page":"Scenario Configuration","title":"Update Ambulances","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Test different fleet configurations:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"# Start with base scenario\nbase_scenario = load_scenario_from_config(\"auckland\", \"base.toml\")\n\n# Try different fleet sizes\nfleet_10_scenario = update_scenario_ambulances(base_scenario, \"data/10_ambulances.csv\")\nfleet_15_scenario = update_scenario_ambulances(base_scenario, \"data/15_ambulances.csv\")","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"","category":"page"},{"location":"scenario_configuration/#Creating-New-Scenarios","page":"Scenario Configuration","title":"Creating New Scenarios","text":"","category":"section"},{"location":"scenario_configuration/#Step-1:-Prepare-Model-Files","page":"Scenario Configuration","title":"Step 1: Prepare Model Files","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Option A - Use JEMSS city models from JEMSS_DATA_DIR path. Available cities: auckland, edmonton, manhattan, utrecht","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Option B - Prepare your own model files following JEMSS format.","category":"page"},{"location":"scenario_configuration/#Step-2:-Create-Directory-Structure","page":"Scenario Configuration","title":"Step 2: Create Directory Structure","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"# Create scenario directories\nmkdir -p scenarios/my_city/configs\nmkdir -p scenarios/my_city/models\n\n# Or use existing structure\nscenarios/\n my_city/\n     configs/\n     models/","category":"page"},{"location":"scenario_configuration/#Step-3:-Link-or-Copy-Model-Files","page":"Scenario Configuration","title":"Step 3: Link or Copy Model Files","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"# Option 1: Symbolic link (recommended for JEMSS cities)\nln -s ~/.julia/packages/JEMSS/.../data/cities/auckland/models/1 \\\n      scenarios/my_city/models\n\n# Option 2: Copy files (if you need to modify them)\ncp -r /path/to/model/files/* scenarios/my_city/models/","category":"page"},{"location":"scenario_configuration/#Step-4:-Create-Configuration-File","page":"Scenario Configuration","title":"Step 4: Create Configuration File","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"Create scenarios/my_city/configs/base.toml following the format shown above. Ensure:","category":"page"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"scenario_name matches directory name (my_city)\nAll file paths exist in models/ directory\nRequired files are specified\nOptional files (demand, demand_coverage) are commented out if not available","category":"page"},{"location":"scenario_configuration/#Step-5:-Test-Loading","page":"Scenario Configuration","title":"Step 5: Test Loading","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"scenario = load_scenario_from_config(\"my_city\", \"base.toml\")\nsim = simulate_scenario(scenario)\n\n# Verify it loaded correctly\nprintln(\"Stations: \", sim.numStations)\nprintln(\"Ambulances: \", sim.numAmbs)\nprintln(\"Hospitals: \", sim.numHospitals)","category":"page"},{"location":"scenario_configuration/#See-Also","page":"Scenario Configuration","title":"See Also","text":"","category":"section"},{"location":"scenario_configuration/","page":"Scenario Configuration","title":"Scenario Configuration","text":"API Reference - Complete function documentation\nJEMSS.jl Data - Example city models","category":"page"}]
}
