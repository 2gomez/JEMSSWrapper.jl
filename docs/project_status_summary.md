# JEMSS Wrapper Project Summary

## Project Goal
Create a wrapper for the JEMSS (Julia Emergency Medical Services Simulator) to enable policy evaluation using neuroevolution. The wrapper will allow external experimentation frameworks to test neural network policies against emergency service scenarios.

## Current Status ✅
- **Repository structure** set up with JEMSS as submodule
- **Basic wrapper module** loading JEMSS correctly from local fork
- **Working test example** that runs actual JEMSS simulation
- **Dependency management** configured with `Pkg.develop()`

## Repository Structure
```
JEMSSWrapper.jl/
├── src/JEMSSWrapper.jl      # Main wrapper module
├── examples/basic_test.jl   # Working simulation test
├── deps/JEMSS/              # JEMSS fork submodule
├── Project.toml             # Dependencies (includes local JEMSS)
├── Manifest.toml            # Generated by Pkg.develop()
└── README.md               # Setup instructions
```

## Key Implementation Details
- **JEMSS access**: `JEMSSWrapper.jemss` provides direct access to JEMSS functions
- **Path management**: `JEMSS_PATH` constant for reliable submodule reference
- **Local dependency**: Uses `Pkg.develop(path="deps/JEMSS")` for submodule integration

## Setup Commands
```bash
git clone --recursive YOUR_REPO_URL
cd JEMSSWrapper.jl
julia --project=. -e 'using Pkg; Pkg.develop(path="deps/JEMSS")'
julia --project=. examples/basic_test.jl  # Test
```

## Next Development Phase
Need to implement:

### 1. Policy Interface (`src/policy.jl`)
```julia
abstract type Policy end
struct NeuralPolicy <: Policy
    evaluate::Function  # Neural network evaluation function
    name::String
end
```

### 2. State/Action Translation
- `state_to_vector(sim_state)` - Convert JEMSS state to NN input
- `parse_actions(nn_output)` - Convert NN output to JEMSS actions

### 3. Metrics Extraction (`src/metrics.jl`)
- Extract performance metrics from simulation results
- Standardized `SimulationMetrics` struct

### 4. Parallel Evaluation (`src/parallel.jl`)
- Thread-safe simulator pool
- Batch policy evaluation
- `evaluate_policies(sim_pool, policies)`

### 5. External Framework Interface
- Simple API for neuroevolution frameworks
- Serializable policy functions
- Efficient batch processing

## Architecture Goals
```
ExperimentFramework → JEMSSWrapper → JEMSS
     (policies)    →   (evaluation)  → (simulation)
                   ←   (metrics)     ← (results)
```

## Critical Considerations
- **Thread safety**: JEMSS may need separate instances per thread
- **Memory management**: Multiple concurrent simulations
- **Reproducibility**: Proper random seed handling
- **Neural network integration**: External frameworks provide evaluation functions
